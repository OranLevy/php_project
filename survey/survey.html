<!DOCTYPE html>
<html lang="en">
<head>
    <script>
        function checkUserAnswered(){
            let request = new XMLHttpRequest();
            request.onreadystatechange = function (){
                if(request.readyState === 4 && request.status === 200){
                    let resp = JSON.parse(request.responseText);
                    if(resp['response']){
                        window.location = '/phpProject/index.php';
                    }
                }
            }
            request.open('POST', 'survey.php', true);
            request.setRequestHeader('Content-type', 'application/json');
            let payload = {
                action: 'checkUserAnswered'
            }
            payload = JSON.stringify(payload);
            request.send(payload);
        }
        checkUserAnswered();
    </script>
    <script>
        if(!document.cookie.includes('signed_in=true')){
            window.location = '/phpProject/index.php'
        }
    </script>
    <script src="https://code.jquery.com/jquery-2.1.1.min.js" type="text/javascript"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.1/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.1/js/select2.min.js"></script>
    <script type="text/javascript" src="/phpProject/js/survey.js"></script>
    <script type="text/javascript">
        getCities();
    </script>
    <link rel="stylesheet" href="/phpProject/css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <script>
        function logout(){
            window.location = '/phpProject/static/logout.php';
        }
    </script>
    <title>Survey</title>
</head>
<body>
    <header>
        <nav class="navbar">
            <a class="logo-item" href="/phpProject/index.php" id="logo"><img src="/phpProject/img/survey-icon-12.png"></a>
            <a class="menu-item" href="/phpProject/index.php">Home</a>
            <a class="menu-item" href="/phpProject/results/answers.php">My answers</a>
            <a class="menu-item" href="/phpProject/results/stats.html">Statistics</a>
            <a class="login-item" onclick="logout()">  <div id="login-nav"> <img src="/phpProject/img/login-icon.svg"></div></a>
        </nav>
    </header>
    <main>
        <section class="survey-section" id="survey-part1">
            <h1 class="headline">Part 1 - General information</h1>
            <div class="success-resp" id="part1-success"></div>
            <form class="form">
                <div id="response-part1"></div>
                <div id="q1" class="survey-q">
                    <label class="q_label" for="city_q">1. In which city do you live?</label>
                    <p class="required_message">* Required</p>
                    <p class="q_paragraph">
                        <select id="city_q" name="city_q" style="width:312px; height: 37px;">

                        </select>
                    </p>
                    <p class="error-survey" id="q1_error"></p>
                </div>
                <br>
                <div id="q2" class="survey-q">
                    <label class="q_label" for="age_q">2. What age range do you belong to?</label>
                    <p class="required_message">* Required</p>
                    <p class="q_paragraph">
                        <select name="age_q" id="age_q">
                            <option value="-"></option>
                            <option value="18-21">18-21</option>
                            <option value="22-25">22-25</option>
                            <option value="26-30">26-30</option>
                            <option value="31-35">31-35</option>
                            <option value="36-40">36-40</option>
                        </select>
                    </p>
                    <p class="error-survey" id="q2_error"></p>
                </div>
                <br>
                <div id="q3" class="survey-q">
                    <label class="q_label" for="work_in">3. Do you work in the high-tech industry?</label>
                    <p class="required_message">* Required</p>
                    <p class="q_paragraph">
                        <select name="work_in" id="work_in">
                            <option value="-"></option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </p>
                    <p class="error-survey" id="q3_error"></p>
                </div>
                <br>
                <div id="q4" class="survey-q">
                    <label class="q_label" for="new_job">4.  Are you looking for a new job in this industry?</label>
                    <p class="required_message">* Required</p>
                    <p class="q_paragraph">
                        <select name="new_job" id="new_job" onchange="showQuestions()">
                            <option value="-"></option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </p>
                    <p class="error-survey" id="q4_error"></p>
                </div>
                <br>
                <div id="q5" class="survey-q" style="display: none;">
                    <label class="q_label" for="work_scope">5. What scope of employment are you looking for?</label>
                    <p class="required_message">* Required</p>
                    <p class="q_paragraph">
                        <select name="work_scope" id="work_scope">
                            <option value="-"></option>
                            <option value="Part time">Part time</option>
                            <option value="Full time">Full time</option>
                        </select>
                    </p>
                    <p class="error-survey" id="q5_error"></p>
                </div>
                <br>
                <div id="q6" class="survey-q" style="display: none;">
                    <label class="q_label" for="work_experience">6. Do you have work experience in this industry?</label>
                    <p class="required_message">* Required</p>
                    <p class="q_paragraph">
                        <select name="work_experience" id="work_experience">
                            <option value="-"></option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </p>
                    <p class="error-survey" id="q6_error"></p>
                </div>
                <br>
                <input type="hidden" value="part1" name="part">
                <input class="btn-save" type="button" name="save" value="Save" onclick="answer_part1()">
                <input class="btn-submit" type="button" name="save_continue" value="Save and continue" onclick="answer_part1_continue()">
            </form>
        </section>
        <section class="survey-section" id="survey-part2" style="display: none;">
            <h1 class="headline">Part 2 - Work experience</h1>
            <div class="success-resp" id="part2-success"></div>
            <div class="success-resp" id="part1-continue-success"></div>
            <form class="form">
                <div id="response-part2"></div>
                <div id="q7" class="survey-q">
                    <label class="q_label" for="work_city">7. In which city is your last/current work located?</label>
                    <p class="required_message">* Required</p>
                    <p class="q_paragraph">
                        <select name="work_city" id="work_city" class="work_city">
                        </select>
                    </p>
                    <p class="error-survey" id="q7_error"></p>
                </div>
                <br>
                <div id="q8" class="survey-q">
                    <label class="q_label" for="position_q">8. What was your position?</label>
                    <p class="required_message">* Required</p>
                    <p class="q_paragraph">
                        <select name="position_q" id="position_q">
                            <option value="-"></option>
                            <option value="Data Analyst">Data Analyst</option>
                            <option value="QA Engineer">QA Engineer</option>
                            <option value="Technical Support">Technical Support</option>
                            <option value="IT Manager">IT Manager</option>
                            <option value="SOC/NOC">SOC/NOC</option>
                            <option value="Developer">Developer</option>
                            <option value="Other">Other</option>
                        </select>
                    </p>
                    <p class="error-survey" id="q8_error"></p>
                </div>
                <br>
                <div id="q9" class="survey-q">
                    <label class="q_label" for="work_time">9. How long did you work there?</label>
                    <p class="required_message">* Required</p>
                    <p class="q_paragraph">
                        <select name="work_time" id="work_time">
                            <option value="-"></option>
                            <option value="1 year">1 year</option>
                            <option value="2 years">2 years</option>
                            <option value="3 years">3 years</option>
                            <option value="4 years">4 years</option>
                            <option value="+5 years">+5 years</option>
                        </select>
                    </p>
                    <p class="error-survey" id="q9_error"></p>
                </div>
                <br>
                <div id="q10" class="survey-q">
                    <label class="q_label" for="salary">10. What was your salary per hour?</label>
                    <p class="required_message">* Required</p>
                    <p class="q_paragraph">
                        <input type="number" name="salary" id="salary">
                    </p>
                    <p class="error-survey" id="q10_error"></p>
                </div>
                <br>
                <div id="q11" class="survey-q">
                    <label class="q_label" for="get_job">11. How did you get to this job?</label>
                    <p class="required_message">* Required</p>
                    <p class="q_paragraph">
                        <select name="get_job" id="get_job">
                            <option value="-"></option>
                            <option value="Linkdein">Linkdein</option>
                            <option value="Friends">Friends</option>
                            <option value="HR Company">HR Company</option>
                            <option value="Other">Other</option>
                        </select>
                    </p>
                    <p class="error-survey" id="q11_error"></p>
                </div>
                <br>
                <input class="btn-save" type="button" name="save" value="Save" onclick="answer_part2()">
                <input class="btn-submit" type="button" name="save_continue" value="Save and continue" onclick="answer_part2_continue()">
            </form>
        </section>
        <section class="survey-section" id="survey-part3" style="display: none;">
            <h1 class="headline">Part 3 - Job search</h1>
            <div class="success-resp" id="part3-success"></div>
            <div class="success-resp" id="part2-continue-success"></div>
            <form class="form">
                <div id="response-part3"></div>
                <div id="q12" class="survey-q">
                    <label class="q_label">12. In which sources are you looking for work?</label>
                    <p class="required_message">* Required</p>
                    <p class="checkboxes_paragraph">
                        <input type="checkbox" name="search_source[]" class="search_source" id="Linkdein" value="Linkdein">
                        <label for="Linkdein">Linkdein</label><br>
                        <input type="checkbox" name="search_source[]" class="search_source" id="Facebook" value="Facebook">
                        <label for="Facebook">Facebook</label><br>
                        <input type="checkbox" name="search_source[]" class="search_source" id="Alljobs" value="Alljobs">
                        <label for="Alljobs">Alljobs</label><br>
                        <input type="checkbox" name="search_source[]" class="search_source" id="Other" value="Other">
                        <label for="Other">Other</label>
                    </p>
                    <p class="error-survey" id="q12_error"></p>
                </div>
                <br>
                <div id="q13" class="survey-q">
                    <label class="q_label" for="hour_search">13. How many hours a day (on average) do you spend during the periods when you are looking for a job?</label>
                    <p class="required_message">* Required</p>
                    <p class="q_paragraph">
                        <input type="number" name="hour_search" id="hour_search">
                    </p>
                    <p class="error-survey" id="q13_error"></p>
                </div>
                <br>
                <div id="q14" class="survey-q">
                    <label class="q_label" for="get_accepted">14. Did you ever get accepted for a job?</label>
                    <p class="required_message">* Required</p>
                    <p class="q_paragraph">
                        <select name="get_accepted" id="get_accepted">
                            <option value="-">-</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </p>
                    <p class="error-survey" id="q14_error"></p>
                </div>
                <br>
                <div id="q15" class="survey-q">
                    <label class="q_label" for="hiring_test">15. Have you done a test/interview during the hiring process?</label>
                    <p class="required_message">* Required</p>
                    <p class="q_paragraph">
                        <select name="hiring_test" id="hiring_test">
                            <option value="-">-</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </p>
                    <p class="error-survey" id="q15_error"></p>
                </div>
                <br>
                <div id="q16" class="survey-q">
                    <label class="q_label" for="test_prepared">16. Did you get prepared to the test/interview?</label>
                    <p class="required_message">* Required</p>
                    <p class="q_paragraph">
                        <select name="test_prepared" id="test_prepared">
                            <option value="-">-</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </p>
                    <p class="error-survey" id="q16_error"></p>
                </div>
                <br>
                <input class="btn-save" type="button" name="save" value="Save" onclick="answer_part3()">
                <input class="btn-submit" type="button" name="submit_answers" value="Submit answers" onclick="answer_part3_continue()">
            </form>
        </section>
    </main>
    <script type="text/javascript" src="/phpProject/js/script.js"></script>
    <script>
        showPartSection();
        setTimeout(function(){
            showQuestions();
        },300);

    </script>
</body>
</html>